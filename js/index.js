import{a as i,b as _,c as l}from"../chunk-OSB3YCOK.js";var s=Object.freeze({start:i("start-button"),change:i("change-button"),stay:i("stay-button"),nextHand:i("next-hand-button"),playAgain:i("play-again-button")});var L=null,g=t=>{L=t(L)},A=()=>L,S=()=>{_(".points-details__hand--current")?.classList.remove("points-details__hand--current")};var $=null,u=t=>{let e=null;if(typeof t=="function"){if(e=t($),typeof e!="number")throw new TypeError("Returned value must be a number")}else if(e=t,typeof e!="number"&&e!==null)throw new TypeError("Expected a number or null as argument");$=e,i("remaining-cards").textContent=$?.toString()??"-"},v=()=>$;var K=["H","D","C","S"],N=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],ct=()=>N[Math.floor(Math.random()*N.length)],lt=()=>K[Math.floor(Math.random()*K.length)],R=()=>`${ct()}${lt()}`,F=(t=52)=>{if(typeof t!="number")throw new TypeError("Expected a number as argument.");if(t>52||t<1)throw new RangeError("Argument must be between 1 and 52.");let e=new Set,r=()=>{let n=R();for(;e.has(n);)n=R();return n};for(let n=0;n<t;n++)e.add(r());return Array.from(e)};var D=t=>{let e=t.startsWith("10")?t.slice(0,2):t.charAt(0),r=t.startsWith("10")?t.charAt(2):t.charAt(1);return{number:e,suit:r,card:t}},f=({target:t})=>{if(t.matches(".card > *"))return t.parentNode.classList.toggle("card--selected");if(t.matches(".card"))return t.classList.toggle("card--selected")};var k=t=>t.splice(0,t.length);var H=F(),E=[],C=t=>{let e=null;if(typeof t=="function"){if(e=t(E.map(r=>r)),!Array.isArray(e))throw new TypeError("Returnred value must be an array")}else if(e=t,!Array.isArray(e))throw new TypeError("Expected an array as argument");k(E),E.push(...e)},j=()=>E.map(t=>t),G=()=>{let t=H[Math.floor(Math.random()*H.length)],e=H.indexOf(t);return H.splice(e,1),D(t)};var dt={H:"\u2665",D:"\u2666",C:"\u2663",S:"\u2660"},O=(t,e)=>{let{number:r,suit:n}=G(),o=Number(t.charAt(4))-1,d=`${r}
${dt[n]}`,y={id:t,number:r,suit:n},b=i(t);e?C(p=>(p[o]=y,p)):C(p=>[...p,y]),l(".card__info",b).forEach(p=>p.innerText=d),b.dataset.suit=n};var z=()=>{alert("Error. No se puede cambiar esa cantidad de cartas")},Q=()=>{alert("Error. Debes elegir una carta")};var x=()=>{let t=l(".card--selected"),e=t.length;if(e>v())z();else if(e===0)Q();else{for(let r=0;r<e;r++)O(t[r].id,!0);u(r=>r-e)}t.forEach(r=>r.classList.remove("card--selected")),v()===0&&(s.change.classList.add("hidden"),s.change.removeEventListener("click",x),document.removeEventListener("click",f))};var m=t=>new Set(t.map(({number:r})=>r)).size===t.length,a=t=>new Set(t.map(({suit:r})=>r)).size===1,c=(t,e)=>({matches:t.filter(({number:r})=>r===e),notMatches:t.filter(({number:r})=>r!==e)});var B=(t,{number:e})=>{let{matches:r,notMatches:n}=c(t,e);return r.length===2&&m(n)&&!a(r)},J=t=>t.some(e=>B(t,e)),U=t=>t.find(e=>B(t,e)),h=t=>{let e=t.filter(({number:r})=>{let{matches:n}=c(t,r);return n.length===2&&!a(n)}).map(({number:r})=>r);return new Set(e)};var q=t=>h(t).size===2,W=t=>Array.from(h(t));var I=(t,{number:e})=>{let{matches:r,notMatches:n}=c(t,e);return r.length===3&&m(n)},Y=t=>t.some(e=>I(t,e)),V=t=>t.find(e=>I(t,e)),P=t=>{let e=t.filter(({number:r})=>{let{matches:n}=c(t,r);return n.length===3&&!a(n)}).map(({number:r})=>r);return new Set(e)};var M=Object.freeze({"A-5":/^A|[2-5]$/,"2-6":/^[2-6]$/,"3-7":/^[3-7]$/,"4-8":/^[4-8]$/,"5-9":/^[5-9]$/,"6-10":/^[6-9]|10$/,"7-J":/^[7-9]|10|J$/,"8-Q":/^8|9|10|J|Q$/,"9-K":/^9|10|J|Q|K$/,"10-A":/^10|J|Q|K|A$/}),X=(t,e)=>t.every(({number:r})=>r.match(M[e]))&&m(t),Z=t=>Object.keys(M).some(e=>X(t,e)),tt=t=>Object.keys(M).find(e=>X(t,e));var et=t=>{let e=h(t),r=P(t);return e.size===1&&r.size===1},rt=t=>{let[e]=Array.from(h(t)),[r]=Array.from(P(t));return{pair:e,threeOfKind:r}};var nt=(t,{number:e})=>{let{matches:r}=c(t,e);return r.length===4},ot=t=>t.some(e=>nt(t,e)),st=t=>t.find(e=>nt(t,e));var it=(t,e)=>{if(t.length!==5)throw new Error("Array of cards must have 5 elements");let r={cards:t.map(({number:n,suit:o})=>`${n}${o}`),description:"",id:`hand${e}`,points:0};if(J(t)){let{number:n}=U(t);r.points=2,r.description=`Pair (${n})`}else if(q(t)){let[n,o]=W(t);r.points=5,r.description=`Two Pair: (${n} & ${o})`}else if(Y(t)){let{number:n}=V(t);r.points=10,r.description=`Three of a kind (${n})`}else if(Z(t)){let n=tt(t),o=n.replace("-"," - "),d=t[0].suit;n==="10-A"?(r.points=a(t)?100:15,r.description=a(t)?`Royal Flush (${d}): ${o}`:`Straight: ${o}`):(r.points=a(t)?75:15,r.description=a(t)?`Straight Flush (${d}): ${o}`:`Straight: ${o}`)}else if(a(t)&&m(t))r.points=20,r.description=`Flush (${t[0].suit})`;else if(et(t)){let{pair:n,threeOfKind:o}=rt(t);r.points=25,r.description=`Full House (Pair - ${n} & Three of Kind - ${o})`}else if(ot(t)){let{number:n}=st(t);r.points=50,r.description=`Four of a kind (${n})`}else{let{matches:n}=c(t,"A"),o=n.length===1;r.points=o?1:0,r.description=o?"High Card (A)":"Nothing"}return r};var T=[],mt=()=>location.reload(),pt=()=>{let t=l(".points-details__hand-cards"),e=l(".points-details__hand");t.forEach(r=>r.classList.remove("hidden")),e.forEach(r=>{r.classList.add("points-details__hand--game-over")}),T.forEach(({cards:r,id:n})=>{let o=`(${r.join(" ").replace(/H/g,"\u2665").replace(/D/g,"\u2666").replace(/C/g,"\u2663").replace(/S/g,"\u2660")})`;i(`${n}-cards`).textContent=o})},at=()=>{s.change.classList.add("hidden"),s.stay.classList.add("hidden"),s.change.removeEventListener("click",x),document.removeEventListener("click",f);let t=A(),e=it(j(),t);if(i(`hand${t}-points`).textContent=`${e.points}`,T.push(e),g(r=>r+1),T.length===5){s.nextHand.classList.add("hidden"),s.playAgain.classList.remove("hidden"),s.playAgain.addEventListener("click",mt,{once:!0}),S(),g(()=>null);let r=T.reduce((y,{points:b})=>y+b,0);i("total-hands-points").textContent=`${r}`;let n=i("total-points");n.classList.remove("hidden");let o=i("game-result");o.show(),pt();let d=r>=60;o.classList.add(d?"dialog-game-result--win":"dialog-game-result--lose"),n.classList.add(d?"points-details__total--win":"points-details__total--lose"),o.textContent=d?"You win!":"You lose!",i("remaining-cards-container").classList.add("hidden")}else s.nextHand.classList.remove("hidden"),s.nextHand.addEventListener("click",w,{once:!0});u(null),C([])};var w=()=>{s.start.classList.add("hidden"),s.nextHand.classList.add("hidden"),s.change.classList.remove("hidden"),s.stay.classList.remove("hidden"),u(3);for(let e=0;e<5;e++)O(`card${e+1}`,!1);document.addEventListener("click",f),s.change.addEventListener("click",x),s.stay.addEventListener("click",at,{once:!0}),S();let t=A();t<=5&&l(".points-details__hand")[t-1].classList.add("points-details__hand--current")};s.start.addEventListener("click",w,{once:!0});g(()=>1);

import{a as s,b as M,c as l}from"../chunk-OSB3YCOK.js";var o=Object.freeze({start:s("start-button"),change:s("change-button"),stay:s("stay-button"),nextHand:s("next-hand-button"),playAgain:s("play-again-button")});var L=null,g=t=>{L=t(L)},A=()=>L,S=()=>{M(".points-details__hand--current")?.classList.remove("points-details__hand--current")};var $=null,p=t=>{let e=null;if(typeof t=="function"){if(e=t($),typeof e!="number")throw new TypeError("Returned value must be a number")}else if(e=t,typeof e!="number"&&e!==null)throw new TypeError("Expected a number or null as argument");$=e,s("remaining-cards").textContent=$?.toString()??"-"},v=()=>$;var N=["H","D","C","S"],K=["A","2","3","4","5","6","7","8","9","10","J","Q","K"],lt=()=>K[Math.floor(Math.random()*K.length)],dt=()=>N[Math.floor(Math.random()*N.length)],k=()=>`${lt()}${dt()}`,R=(t=52)=>{if(typeof t!="number")throw new TypeError("Expected a number as argument.");if(t>52||t<1)throw new RangeError("Argument must be between 1 and 52.");let e=new Set,r=()=>{let n=k();for(;e.has(n);)n=k();return n};for(let n=0;n<t;n++)e.add(r());return Array.from(e)};var D=t=>{let e=t.startsWith("10")?t.slice(0,2):t.charAt(0),r=t.startsWith("10")?t.charAt(2):t.charAt(1);return{number:e,suit:r,card:t}},u=({target:t})=>{if(t.matches(".card > *"))return t.parentNode.classList.toggle("card--selected");if(t.matches(".card"))return t.classList.toggle("card--selected")};var F=t=>t.splice(0,t.length);var H=R(),E=[],y=t=>{let e=null;if(typeof t=="function"){if(e=t(E.map(r=>r)),!Array.isArray(e))throw new TypeError("Returnred value must be an array")}else if(e=t,!Array.isArray(e))throw new TypeError("Expected an array as argument");F(E),E.push(...e)},j=()=>E.map(t=>t),G=()=>{let t=H[Math.floor(Math.random()*H.length)],e=H.indexOf(t);return H.splice(e,1),D(t)};var mt={H:"\u2665",D:"\u2666",C:"\u2663",S:"\u2660"},O=(t,e)=>{let{number:r,suit:n}=G(),a=Number(t.charAt(4))-1,h=`${r}
${mt[n]}`,x={id:t,number:r,suit:n},b=s(t);e?y(m=>(m[a]=x,m)):y(m=>[...m,x]),l(".card__info",b).forEach(m=>m.innerText=h),b.dataset.suit=n};var z=()=>{alert("Error. No se puede cambiar esa cantidad de cartas")},Q=()=>{alert("Error. Debes elegir una carta")};var C=()=>{let t=l(".card--selected"),e=t.length;if(e>v())z();else if(e===0)Q();else{for(let r=0;r<e;r++)O(t[r].id,!0);p(r=>r-e)}t.forEach(r=>r.classList.remove("card--selected")),v()===0&&(o.change.classList.add("hidden"),o.change.removeEventListener("click",C),document.removeEventListener("click",u))};var d=t=>new Set(t.map(({number:r})=>r)).size===t.length,i=t=>new Set(t.map(({suit:r})=>r)).size===1,c=(t,e)=>({matches:t.filter(({number:r})=>r===e),notMatches:t.filter(({number:r})=>r!==e)});var B=(t,{number:e})=>{let{matches:r,notMatches:n}=c(t,e);return r.length===2&&d(n)&&!i(r)},J=t=>t.some(e=>B(t,e)),U=t=>t.find(e=>B(t,e)),f=t=>{let e=t.filter(({number:r})=>{let{matches:n}=c(t,r);return n.length===2&&!i(n)}).map(({number:r})=>r);return new Set(e)};var I=t=>f(t).size===2,q=t=>Array.from(f(t));var W=(t,{number:e})=>{let{matches:r,notMatches:n}=c(t,e);return r.length===3&&d(n)},Y=t=>t.some(e=>W(t,e)),V=t=>t.find(e=>W(t,e)),P=t=>{let e=t.filter(({number:r})=>{let{matches:n}=c(t,r);return n.length===3&&!i(n)}).map(({number:r})=>r);return new Set(e)};var _=Object.freeze({"A-5":/^A|[2-5]$/,"2-6":/^[2-6]$/,"3-7":/^[3-7]$/,"4-8":/^[4-8]$/,"5-9":/^[5-9]$/,"6-10":/^[6-9]|10$/,"7-J":/^[7-9]|10|J$/,"8-Q":/^8|9|10|J|Q$/,"9-K":/^9|10|J|Q|K$/,"10-A":/^10|J|Q|K|A$/}),X=(t,e)=>t.every(({number:r})=>r.match(_[e]))&&d(t),Z=t=>Object.keys(_).some(e=>X(t,e)),tt=t=>Object.keys(_).find(e=>X(t,e));var et=t=>{let e=f(t),r=P(t);return e.size===1&&r.size===1},rt=t=>{let[e]=Array.from(f(t)),[r]=Array.from(P(t));return{pair:e,threeOfKind:r}};var nt=(t,{number:e})=>{let{matches:r}=c(t,e);return r.length===4},ot=t=>t.some(e=>nt(t,e)),st=t=>t.find(e=>nt(t,e));var it=t=>{if(t.length!==5)throw new Error("Array of cards must have 5 elements");let e={cards:t.map(({number:r,suit:n})=>`${r}${n}`),description:"",type:""};if(J(t)){let{number:r}=U(t);e.description=`Pair (${r})`,e.type="pair"}else if(I(t)){let[r,n]=q(t);e.description=`Two Pair: (${r} & ${n})`,e.type="two-pair"}else if(Y(t)){let{number:r}=V(t);e.description=`Three of a kind (${r})`,e.type="three-of-kind"}else if(Z(t)){let r=tt(t),n=r.replace("-"," - "),a=t[0].suit;r==="10-A"?(e.description=i(t)?`Royal Flush (${a}): ${n}`:`Straight: ${n}`,e.type=i(t)?"royal-flush":"straight"):(e.description=i(t)?`Straight Flush (${a}): ${n}`:`Straight: ${n}`,e.type=i(t)?"straight-flush":"straight")}else if(i(t)&&d(t))e.description=`Flush (${t[0].suit})`,e.type="flush";else if(et(t)){let{pair:r,threeOfKind:n}=rt(t);e.description=`Full House (Pair - ${r} & Three of Kind - ${n})`,e.type="full-house"}else if(ot(t)){let{number:r}=st(t);e.description=`Four of a kind (${r})`,e.type="four-of-kind"}else{let{matches:r}=c(t,"A"),n=r.length===1;e.description=n?"High Card (A)":"Nothing",e.type=n?"high-card":"nothing"}return e};var at=Object.freeze({nothing:0,"high-card":1,pair:2,"two-pair":5,"three-of-kind":10,straight:15,flush:20,"full-house":25,"four-of-kind":50,"straight-flush":75,"royal-flush":100});var T=[],pt=()=>location.reload(),ut=()=>{let t=l(".points-details__hand-cards"),e=l(".points-details__hand");t.forEach(r=>r.classList.remove("hidden")),e.forEach(r=>{r.classList.add("points-details__hand--game-over")}),T.forEach(({cards:r,id:n})=>{let a=`(${r.join(" ").replace(/H/g,"\u2665").replace(/D/g,"\u2666").replace(/C/g,"\u2663").replace(/S/g,"\u2660")})`;s(`${n}-cards`).textContent=a})},ct=()=>{o.change.classList.add("hidden"),o.stay.classList.add("hidden"),o.change.removeEventListener("click",C),document.removeEventListener("click",u);let t=A(),e=it(j());if(e.id=`hand${t}`,e.points=at[e.type],s(`hand${t}-points`).textContent=`${e.points}`,T.push(e),g(r=>r+1),T.length===5){o.nextHand.classList.add("hidden"),o.playAgain.classList.remove("hidden"),o.playAgain.addEventListener("click",pt,{once:!0}),S(),g(()=>null);let r=T.reduce((x,{points:b})=>x+b,0);s("total-hands-points").textContent=`${r}`;let n=s("total-points");n.classList.remove("hidden");let a=s("game-result");a.show(),ut();let h=r>=60;a.classList.add(h?"dialog-game-result--win":"dialog-game-result--lose"),n.classList.add(h?"points-details__total--win":"points-details__total--lose"),a.textContent=h?"You win!":"You lose!",s("remaining-cards-container").classList.add("hidden")}else o.nextHand.classList.remove("hidden"),o.nextHand.addEventListener("click",w,{once:!0});p(null),y([])};var w=()=>{o.start.classList.add("hidden"),o.nextHand.classList.add("hidden"),o.change.classList.remove("hidden"),o.stay.classList.remove("hidden"),p(3);for(let e=0;e<5;e++)O(`card${e+1}`,!1);document.addEventListener("click",u),o.change.addEventListener("click",C),o.stay.addEventListener("click",ct,{once:!0}),S();let t=A();t<=5&&l(".points-details__hand")[t-1].classList.add("points-details__hand--current")};o.start.addEventListener("click",w,{once:!0});g(()=>1);
